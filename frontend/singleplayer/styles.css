:root {
    /* Classic Minesweeper Colors */
    --c-bg: #c0c0c0;
    --c-shadow-dark: #808080;
    --c-shadow-light: #ffffff;
    --c-shadow-darker: #000000;
    /* For deepest shadows */

    --c-tile-up: #c0c0c0;
    --c-tile-down: #c0c0c0;
    --c-focus: #c0c0c0;

    /* Text Colors */
    --c-text: #000000;
    --c-red: #ff0000;

    /* Number Colors */
    --c-1: #0000ff;
    --c-2: #008000;
    --c-3: #ff0000;
    --c-4: #000080;
    --c-5: #800000;
    --c-6: #008080;
    --c-7: #000000;
    --c-8: #808080;
}

body {
    background-color: #002c03;
    /* Dark background outside the game window */
    min-width: 600px;
    margin: 5;
    height: 100vh;
    display: flex;
    flex-direction: column;
    /* Stack header and game vertical */
    align-items: center;
    justify-content: center;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    padding: 5px;
}

/* Typography Overrides for Game Board */
h1,
h2,
h3,
p,
span,
button,
input {
    font-family: inherit;
}

/* Main Game Window (reusing 'main' indirectly or container logic) */
/* Ideally, we wrap the whole game interface in a .window class, 
   but for now we'll style the existing structure to look like one. */

/* Reset generic elements */
* {
    box-sizing: border-box;
}

main {
    /* This acts as the main game window */
    background-color: var(--c-bg);
    border-top: 2px solid var(--c-shadow-light);
    border-left: 2px solid var(--c-shadow-light);
    border-right: 2px solid var(--c-shadow-dark);
    border-bottom: 2px solid var(--c-shadow-dark);
    padding: 6px;
    display: inline-block;
    /* Fit content */
    visibility: visible;
    /* Override hidden default */
    width: auto;
    height: auto;
}

/* Header / Title - Unhide and style */
header {
    display: block;
    margin-bottom: 20px;
    text-align: center;
    margin-top: 3vh;
}

header a {
    text-decoration: none;
    color: #ffffff;
    /* White text on dark bg */
}

header h1 {
    font-size: 2rem;
    margin: 0;
    color: #ffffff;
    font-family: 'Courier New', Courier, monospace;
    /* Retro feel */
}

header p {
    font-size: 1.5rem;
    margin: 0;
    color: #7398f4;
    font-family: 'Courier New', Courier, monospace;
    /* Retro feel */
}

/* Layout adjustments */
.container {
    padding: 10px;
    border-top: 3px solid var(--c-shadow-dark);
    border-left: 3px solid var(--c-shadow-dark);
    border-right: 3px solid var(--c-shadow-light);
    border-bottom: 3px solid var(--c-shadow-light);
    background-color: var(--c-tile-down);
    margin-top: 10px;
}

/* Game Stats / Header Area */
.game-stats {
    display: flex;
    justify-content: space-between;
    align-items: center;
    background-color: var(--c-bg);
    border-top: 2px solid var(--c-shadow-dark);
    border-left: 2px solid var(--c-shadow-dark);
    border-right: 2px solid var(--c-shadow-light);
    border-bottom: 2px solid var(--c-shadow-light);
    padding: 6px;
    margin-bottom: 6px;
}

/* Digital Counters */
#timer,
#bomb-counter,
#flag-counter {
    background-color: #000;
    color: var(--c-red);
    font-family: 'Courier New', Courier, monospace;
    /* Fallback for digital font */
    font-size: 24px;
    font-weight: bold;
    padding: 2px 4px;
    min-width: 60px;
    text-align: right;
    border-top: 1px solid var(--c-shadow-dark);
    border-left: 1px solid var(--c-shadow-dark);
    border-right: 1px solid var(--c-shadow-light);
    border-bottom: 1px solid var(--c-shadow-light);
}

/* Smiley Button (reusing toggle-flag or creating a spot for it) */
/* We'll use the flag button for now as the central control if needed, 
   but strictly standard Minesweeper has a smiley face reset. 
   For now, we'll style the available buttons classic. */

button {
    background-color: var(--c-bg);
    border-top: 2px solid var(--c-shadow-light);
    border-left: 2px solid var(--c-shadow-light);
    border-right: 2px solid var(--c-shadow-dark);
    border-bottom: 2px solid var(--c-shadow-dark);
    color: black;
    cursor: pointer;
    font-size: 0.9rem;
    padding: 2px 8px;
}

button:active {
    border-top: 2px solid var(--c-shadow-dark);
    border-left: 2px solid var(--c-shadow-dark);
    border-right: 2px solid var(--c-shadow-light);
    border-bottom: 2px solid var(--c-shadow-light);
    padding: 3px 7px 1px 9px;
    /* Shift content */
}

/* Grid Styling */
#grid {
    display: grid;
    /* Restore dynamic grid columns controlled by JS */
    grid-template-columns: repeat(var(--grid-cols, 10), var(--tile-size, 25px));
    gap: 0;

    border-top: 3px solid var(--c-shadow-dark);
    border-left: 3px solid var(--c-shadow-dark);
    border-right: 3px solid var(--c-shadow-light);
    border-bottom: 3px solid var(--c-shadow-light);
}

/* Tiles */
.tile {
    width: var(--tile-size, 25px);
    /* Smaller classic size default */
    height: var(--tile-size, 25px);
    background-color: var(--c-tile-up);

    /* Raised 3D Border */
    border-top: 5px solid var(--c-shadow-light);
    border-left: 5px solid var(--c-shadow-light);
    border-right: 5px solid var(--c-shadow-dark);
    border-bottom: 5px solid var(--c-shadow-dark);

    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 900;
    font-size: calc(var(--tile-size, 25px) * 0.7);
    /* Scale font with tile size */
    line-height: 1;
    font-family: 'Verdana', sans-serif;
    /* Crisp bold font */
    cursor: default;
    user-select: none;
}

.tile:active {
    /* Pressed effect for unrevealed tiles */
    border: none;
    border-top: 1px solid var(--c-shadow-dark);
    /* Subtle shadow */
    padding-top: 2px;
    padding-left: 2px;
}

/* Revealed State */
.revealed {
    background-color: var(--c-tile-down);
    border: 1px solid var(--c-shadow-dark);
    /* Very subtle grid line */
    /* Often classic minesweeper reveals are flat with just a subtle border */
    border-top: 1px solid #808080;
    border-left: 1px solid #808080;
    border-right: none;
    border-bottom: none;
}

/* Text Colors for Numbers */
.revealed[data-value="1"] {
    color: var(--c-1);
}

.revealed[data-value="2"] {
    color: var(--c-2);
}

.revealed[data-value="3"] {
    color: var(--c-3);
}

.revealed[data-value="4"] {
    color: var(--c-4);
}

.revealed[data-value="5"] {
    color: var(--c-5);
}

.revealed[data-value="6"] {
    color: var(--c-6);
}

.revealed[data-value="7"] {
    color: var(--c-7);
}

.revealed[data-value="8"] {
    color: var(--c-8);
}

/* Icons */
.flagged {
    color: red;
    /* Keep the raised border for flagged tiles */
}

.mine {
    background-color: var(--c-bg);
    /* Or red if exploded? */
    color: black;
}

.tile[style*="background-color: red"] {
    background-color: red !important;
    /* Exploded mine */
}

/* Sidebar / Controls Re-layout */
/* Classic minesweeper has a menu bar, we have a sidebar. 
   We'll float the sidebar or put it above/below to mimic a window, 
   or just style it as a separate 'window' panel. */
aside {
    display: block;
    background: var(--c-bg);
    border: 2px solid var(--c-shadow-light);
    border-right-color: var(--c-shadow-dark);
    border-bottom-color: var(--c-shadow-dark);
    margin-right: 10px;
    padding: 10px;
    /* Position it relatively or absolute depending on desired layout. 
       Let's stick to absolute for a "popup" feel or free floating window, 
       but for usability in this layout, let's make it a side panel. */
    width: 200px;
    position: relative;
    /* Changed from absolute to flow naturally in flex */
    box-shadow: none;
    margin-bottom: 10px;
}

/* Container for difficulty buttons */
.diffChoice {
    display: flex;
    flex-direction: column;
    gap: 4px;
    margin-bottom: 10px;
    width: 100%;
}

.diffChoice .difficulty {
    flex: 1;
    font-size: 10px;
    /* Small text for buttons */
}

/* Helper to make the main game area centered properly */
div[class=""] {
    /* The wrapper in html */
    display: flex;
    flex-direction: row;
    align-items: flex-start;
    justify-content: center;
    gap: 20px;
}

.hidden {
    display: none !important;
}

/* Specific button overrides */
.difficulty {
    display: block;
    width: 100%;
    margin-bottom: 5px;
}

.input-block p {
    margin: 2px 0;
    font-size: 12px;
}

.input-block input {
    width: 100%;
    margin-bottom: 5px;
    border: 2px solid var(--c-shadow-dark);
    border-right-color: var(--c-shadow-light);
    border-bottom-color: var(--c-shadow-light);
}

#Error {
    color: red;
    font-size: 12px;
}

/* Flag control button visibility */
.flagControls {
    display: flex;
    justify-content: center;
    gap: 10px;
    padding: 5px;
    width: 100%;
}

#toggle-flag,
#toggle-controls {
    min-width: 120px;
    /* Ensure it has a reasonable click area */
    font-weight: bold;
}